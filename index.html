<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>财务业务合作伙伴 | 杨云浩个人简历</title>
    <meta name="description" content="资深财务业务合作伙伴杨云浩个人简历网站，展示专业经验、分析能力和业务洞察">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
    <!-- 在head标签中添加Chart.js DataLabels插件 -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <!-- 在Chart初始化之前添加 -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
</head>
<body class="has-sidebar">
    <!-- 侧边导航栏 -->
    <nav class="sidebar-nav">
            <button class="sidebar-toggler d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarNav">
                <i class="bi bi-list"></i>
            </button>
        </div>
        <div class="sidebar-content collapse d-md-block" id="sidebarNav">
            <ul class="sidebar-nav-list">
                <li class="sidebar-nav-item"><a class="sidebar-nav-link" href="#home"><i class="bi bi-house-door me-2"></i>首页</a></li>
                <li class="sidebar-nav-item"><a class="sidebar-nav-link" href="#about"><i class="bi bi-person me-2"></i>关于我</a></li>
                <li class="sidebar-nav-item"><a class="sidebar-nav-link" href="#experience"><i class="bi bi-briefcase me-2"></i>专业经验</a></li>
                <li class="sidebar-nav-item"><a class="sidebar-nav-link" href="#skills"><i class="bi bi-bar-chart me-2"></i>专业技能</a></li>
                <li class="sidebar-nav-item"><a class="sidebar-nav-link" href="#projects"><i class="bi bi-folder me-2"></i>案例效果</a></li>
                <li class="sidebar-nav-item"><a class="sidebar-nav-link" href="#contact"><i class="bi bi-envelope me-2"></i>联系方式</a></li>
            </ul>
        </div>
    </nav>
    
    <!-- 主内容区 -->
    <main class="main-content">

    <!-- 首页部分 -->
    <section id="home" class="hero-section d-flex align-items-center">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1>杨云浩</h1>
                    <h2>专业财务业务合作伙伴</h2>
                    <p class="lead">擅长财务分析、业务决策支持与价值创造</p>
                    <div class="hero-btns mt-4">
                        <a href="#contact" class="btn btn-primary me-3">联系我</a>
                        <a href="#experience" class="btn btn-outline-primary me-3">查看经验</a>
                        <a href="#projects" class="btn btn-outline-secondary">分析案例</a>
                    </div>
                </div>
                <div class="col-lg-6 text-center">
                    <div class="profile-image-container">
                        <div class="profile-image">
                            <img src="images/your-photo.jpg" alt="杨云浩" class="img-fluid">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 关于我部分 -->
    <section id="about" class="section-padding">
        <div class="container">
            <div class="section-title text-center mb-5">
                <h2>关于我</h2>
                <div class="underline"></div>
            </div>
            <div class="row align-items-center">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <div class="about-content">
                        <p>我是一名拥有双学位背景（会计与金融）的财务背景数据分析专业人士。将全球视角的财务分析与深刻的业务洞察相结合，帮助企业实现可持续增长和价值创造。</p>
                        <p>在职业生涯中，我专注于业财数据整合与业务战略支持，通过深入分析和优化业财政策，为企业提供有效的决策支持。我擅长利用数据分析工具进行多维度财务分析，并具备良好的跨部门协作经验及团队管理能力。</p>
                        <div class="personal-info mt-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>学历：</strong> 美国爱荷华州立大学双学士学位</p>
                                    <p><strong>专业：</strong> 金融 & 会计双学位</p>
                                    <p><strong>专长：</strong> 财务分析、业务决策支持</p>
                                </div>
                                <div class="col-md-6">
                                    <p><strong>证书：</strong> 全美会计荣誉协会成员、IRS税务培训认证</p>
                                    <p><strong>语言：</strong> 中文(母语), 英语(流利商务沟通), 粤语(流利)</p>
                                    <p><strong>所在地：</strong> 深圳</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="finance-metrics-card">
                        <h3 class="mb-4">核心成就指标</h3>
                        <div class="metrics-container">
                            <div class="metric-item">
                                <div class="metric-icon">
                                    <i class="bi bi-cash-coin"></i>
                                </div>
                                <div class="metric-content">
                                    <h4>1000万+</h4>
                                    <p>业务线扭亏为盈</p>
                                </div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-icon">
                                    <i class="bi bi-graph-up-arrow"></i>
                                </div>
                                <div class="metric-content">
                                    <h4>20%+</h4>
                                    <p>提升资源利用效率</p>
                                </div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-icon">
                                    <i class="bi bi-clock-history"></i>
                                </div>
                                <div class="metric-content">
                                    <h4><0.5%</h4>
                                    <p>年应收率管理</p>
                                </div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-icon">
                                    <i class="bi bi-people"></i>
                                </div>
                                <div class="metric-content">
                                    <h4>30+</h4>
                                    <p>业务盈利性改造</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 专业经验部分 -->
    <section id="experience" class="section-padding bg-light">
        <div class="container">
            <div class="section-title text-center mb-5">
                <h2>专业经验</h2>
                <div class="underline"></div>
            </div>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>财务派驻主管岗</h3>
                        <h4>中国人民财产保险股份有限公司深圳市分公司</h4>
                        <span class="period">2017年3月 - 至今</span>
                        <ul>
                            <li>研究总分公司的政策，制定本地化经营策略并推动跨部门执行</li>
                            <li>分解经营目标至业务团队，动态监控核心指标，通过多维数据分析提出改善建议</li>
                            <li>优化亏损业务线，实现扭亏为盈，连续2年盈利超1000万元</li>
                            <li>建立"预算规划→费用监控→动态调整"三阶段费用管理体系，提升资源使用效率30%以上</li>
                            <li>引导业务费用精准投放，确保资源配置与业务发展匹配</li>
                        </ul>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>财务分析岗</h3>
                        <h4>中国人民财产保险股份有限公司深圳市分公司</h4>
                        <span class="period">2016年 - 2017年3月</span>
                        <ul>
                            <li>主导产品线经营数据分析，结合业务场景输出策略建议</li>
                            <li>支持"营改增"进项税模块改造：重新制定供应商标准并主导全公司培训</li>
                            <li>完成年度预算编制及下属公司考核体系设计</li>
                            <li>优化财务流程以提高指标达成率</li>
                            <li>监控销售费用预算执行情况并完成固定资产投资审核</li>
                        </ul>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-content">
                        <h3>美国义务报税项目（VITA）</h3>
                        <h4>项目经理</h4>
                        <span class="period">2014年1月 - 2014年5月</span>
                        <ul>
                            <li>协调团队为300名低收入家庭提供免费税务服务（IRS Form 1040）</li>
                            <li>完成抵扣项政策解读与系统化报税流程优化</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 专业技能部分 -->
    <section id="skills" class="section-padding">
        <div class="container">
            <div class="section-title text-center mb-5">
                <h2>专业技能</h2>
                <div class="underline"></div>
            </div>
            <div class="row">
                <div class="col-lg-6 mb-4">
                    <div class="skills-card">
                        <h3>财务技能</h3>
                        <div class="skill-item">
                            <div class="skill-info">
                                <p>全球视角财务分析（GAAP/IFRS标准）</p>
                                <p>95%</p>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 95%"></div>
                            </div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <p>业财数据整合</p>
                                <p>95%</p>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 90%"></div>
                            </div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <p>业务绩效分析</p>
                                <p>90%</p>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 92%"></div>
                            </div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <p>风险管理</p>
                                <p>90%</p>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 88%"></div>
                            </div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <p>成本管理优化</p>
                                <p>95%</p>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 94%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 mb-4">
                    <div class="skills-card">
                        <h3>技术与软件</h3>
                        <div class="skill-item">
                            <div class="skill-info">
                                <p>Excel高级函数（VLOOKUP, INDEX-MATCH）</p>
                                <p>99%</p>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 98%"></div>
                            </div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <p>Python (Pandas, NumPy)</p>
                                <p>80%</p>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 85%"></div>
                            </div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <p>Power Query/Pivot</p>
                                <p>80%</p>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 90%"></div>
                            </div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <p>SAP系统</p>
                                <p>80%</p>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 80%"></div>
                            </div>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <p>商业统计分析</p>
                                <p>95%</p>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 75%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="skills-card">
                        <h3>商业技能</h3>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="skill-badge">
                                    <i class="bi bi-people-fill"></i>
                                    <span>跨部门协作经验</span>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="skill-badge">
                                    <i class="bi bi-bar-chart-fill"></i>
                                    <span>战略规划与执行</span>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="skill-badge">
                                    <i class="bi bi-megaphone-fill"></i>
                                    <span>财务沟通与汇报</span>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="skill-badge">
                                    <i class="bi bi-graph-up"></i>
                                    <span>风险评估与管理</span>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="skill-badge">
                                    <i class="bi bi-pie-chart-fill"></i>
                                    <span>业财战略优化</span>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="skill-badge">
                                    <i class="bi bi-briefcase-fill"></i>
                                    <span>数据分析与展示</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 案例效果部分 -->
    <section id="projects" class="section-padding bg-light">
        <div class="container">
            <div class="section-title text-center mb-5">
                <h2>案例效果</h2>
                <div class="underline"></div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="project-card">
                        <div class="project-header">
                            <h3>业务线优化与盈利转型项目</h3>
                            <span class="project-badge">中国人民财产保险</span>
                        </div>
                        <div class="project-body">
                            <p>通过深入分析业务数据，识别亏损原因并制定优化方案，重构业务流程和风险管控体系，实现业务线从亏损到盈利的转型。</p>
                            <div class="project-stats">
                                <div class="stat-item">
                                    <span class="stat-value">+1000万</span>
                                    <span class="stat-label">年度盈利</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value">2年</span>
                                    <span class="stat-label">连续盈利</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value">6月</span>
                                    <span class="stat-label">实施周期</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="project-card">
                        <div class="project-header">
                            <h3>三阶段费用管理体系设计</h3>
                            <span class="project-badge">中国人民财产保险</span>
                        </div>
                        <div class="project-body">
                            <p>建立"预算规划→费用监控→动态调整"三阶段费用管理体系，建立精细化费用管理流程，优化资源分配效率。</p>
                            <div class="project-stats">
                                <div class="stat-item">
                                    <span class="stat-value">+30%</span>
                                    <span class="stat-label">资源效率</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value">-20%</span>
                                    <span class="stat-label">冗余支出</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value">6月</span>
                                    <span class="stat-label">实施周期</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="project-card">
                        <div class="project-header">
                            <h3>"营改增"进项税模块改造</h3>
                            <span class="project-badge">中国人民财产保险</span>
                        </div>
                        <div class="project-body">
                            <p>支持"营改增"税务政策转型，重新制定供应商标准，优化进项税抵扣流程，并主导全公司培训，确保合规性和税务优化。</p>
                            <div class="project-stats">
                                <div class="stat-item">
                                    <span class="stat-value">100%</span>
                                    <span class="stat-label">合规率</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value">+15%</span>
                                    <span class="stat-label">抵扣效率</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value">3月</span>
                                    <span class="stat-label">实施周期</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="project-card">
                        <div class="project-header">
                            <h3>美国义务报税项目（VITA）</h3>
                            <span class="project-badge">项目组长</span>
                        </div>
                        <div class="project-body">
                            <p>协调志愿者团队为低收入家庭提供免费税务服务，优化报税流程和抵扣项分析，提高服务效率和准确性。</p>
                            <div class="project-stats">
                                <div class="stat-item">
                                    <span class="stat-value">300+</span>
                                    <span class="stat-label">服务家庭</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value">+20%</span>
                                    <span class="stat-label">抵扣效益</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value">5月</span>
                                    <span class="stat-label">项目周期</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 业务洞察仪表板 -->
    <section class="section-padding">
        <div class="container">
            <div class="section-title text-center mb-5">
                <h2>数据分析展示</h2>
                <h5>（*非真实数据，仅作示例）</h5>
                <div class="underline"></div>
            </div>
            <div class="row">
                <div class="col-lg-6 mb-4">
                    <div class="insight-card">
                        <h3>财务分析框架</h3>
                        <p>通过整合多维度财务指标，构建全面的业务绩效分析框架</p>
                        <div class="canvas-container">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 mb-4">
                    <div class="insight-card">
                        <h3>项目决策模型</h3>
                        <p>基于数据驱动的投资分析模型，支持战略性资源配置决策</p>
                        <div class="canvas-container">
                            <canvas id="investmentChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Power BI 风格预算及费用监控仪表板 -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="insight-card power-bi-dashboard">
                        <div class="dashboard-header d-flex justify-content-between align-items-center mb-4">
                            <div>
                                <h3 class="dashboard-title">预算及费用监控仪表示例</h3>
                                <p class="text-muted">实时监控预算执行情况，优化资源配置</p>
                            </div>
                            <div class="dashboard-controls d-flex align-items-center">
                                <div class="time-filter me-3">
                                    <label class="small text-muted mb-1">时间范围</label>
                                    <div class="btn-group">
                                        <button class="btn btn-sm btn-light active">季度</button>
                                        <button class="btn btn-sm btn-light">年度</button>
                                    </div>
                                </div>
                                <div class="year-filter">
                                    <label class="small text-muted mb-1">财年</label>
                                    <select class="form-select form-select-sm">
                                        <option selected>2023 财年</option>
                                        <option>2022 财年</option>
                                        <option>2021 财年</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <!-- KPI 指标卡片 -->
                            <div class="col-md-3 mb-4">
                                <div class="kpi-card text-center p-3">
                                    <div class="d-flex align-items-center mb-2">
                                        <div class="kpi-icon">
                                            <i class="bi bi-calculator"></i>
                                        </div>
                                        <div class="ms-3 text-start">
                                            <h6 class="text-muted mb-0">总预算</h6>
                                            <h3 class="mb-0">¥ 1,250万</h3>
                                        </div>
                                    </div>
                                    <div class="kpi-progress">
                                        <div class="d-flex justify-content-between small mb-1">
                                            <span>使用情况</span>
                                            <span class="text-primary fw-bold">65%</span>
                                        </div>
                                        <div class="progress" style="height: 6px;">
                                            <div class="progress-bar bg-gradient-primary" role="progressbar" style="width: 65%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-4">
                                <div class="kpi-card text-center p-3">
                                    <div class="d-flex align-items-center mb-2">
                                        <div class="kpi-icon success">
                                            <i class="bi bi-graph-down-arrow"></i>
                                        </div>
                                        <div class="ms-3 text-start">
                                            <h6 class="text-muted mb-0">成本控制</h6>
                                            <h3 class="mb-0 text-success">-8.2%</h3>
                                        </div>
                                    </div>
                                    <div class="kpi-trend">
                                        <div class="d-flex align-items-center">
                                            <span class="badge bg-success-soft"><i class="bi bi-arrow-down-right"></i> 低于预算</span>
                                            <span class="ms-auto small text-muted">较上季度 <span class="text-success">-2.1%</span></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-4">
                                <div class="kpi-card text-center p-3">
                                    <div class="d-flex align-items-center mb-2">
                                        <div class="kpi-icon warning">
                                            <i class="bi bi-graph-up-arrow"></i>
                                        </div>
                                        <div class="ms-3 text-start">
                                            <h6 class="text-muted mb-0">费用趋势</h6>
                                            <h3 class="mb-0">¥ 320万</h3>
                                        </div>
                                    </div>
                                    <div class="kpi-trend">
                                        <div class="d-flex align-items-center">
                                            <span class="badge bg-warning-soft"><i class="bi bi-arrow-up-right"></i> 环比+5%</span>
                                            <span class="ms-auto small text-muted">年度同比 <span class="text-warning">+3.8%</span></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3 mb-4">
                                <div class="kpi-card text-center p-3">
                                    <div class="d-flex align-items-center mb-2">
                                        <div class="kpi-icon info">
                                            <i class="bi bi-calendar-check"></i>
                                        </div>
                                        <div class="ms-3 text-start">
                                            <h6 class="text-muted mb-0">预测剩余预算</h6>
                                            <h3 class="mb-0">¥ 437万</h3>
                                        </div>
                                    </div>
                                    <div class="kpi-trend">
                                        <div class="d-flex align-items-center">
                                            <span class="badge bg-info-soft"><i class="bi bi-calendar"></i> 剩余1季度</span>
                                            <span class="ms-auto small text-muted">预测准确率 <span class="text-info">92%</span></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 主要图表区域 -->
                            <div class="col-lg-8 mb-4">
                                <div class="chart-card h-100">
                                    <div class="chart-header d-flex justify-content-between align-items-center mb-2">
                                        <div>
                                            <h5 class="chart-title mb-0">季度费用趋势与预算对比</h5>
                                            <p class="text-muted small mb-0">季度花费与预算分配的对比分析</p>
                                        </div>
                                        <div class="chart-tools">
                                            <div class="btn-group btn-group-sm">
                                                <button class="btn btn-sm btn-light active">条形图</button>
                                                <button class="btn btn-sm btn-light">线形图</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="chart-legend d-flex mt-2 mb-3">
                                        <div class="d-flex align-items-center me-3">
                                            <span class="legend-dot primary"></span>
                                            <span class="small"> </span>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <span class="legend-dot secondary"></span>
                                            <span class="small"> </span>
                                        </div>
                                        <div class="ms-auto text-end">
                                            <span class="small text-muted">单位: 万元</span>
                                        </div>
                                    </div>
                                    <div class="chart-container-wrapper">
                                        <canvas id="budgetComparisonChart" height="280"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 费用分布饼图 -->
                            <div class="col-lg-4 mb-4">
                                <div class="chart-card h-100">
                                    <div class="chart-header mb-2">
                                        <h5 class="chart-title mb-0">费用类型分布</h5>
                                        <p class="text-muted small mb-0">按类别划分的支出占比分析</p>
                                    </div>
                                    <div class="chart-container-wrapper donut-wrapper">
                                        <canvas id="expenseDistributionChart" height="250"></canvas>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 部门预算表格 -->
                            <div class="col-12">
                                <div class="table-card">
                                    <div class="table-header d-flex justify-content-between align-items-center mb-3">
                                        <div>
                                            <h5 class="table-title mb-0">成本中心预算执行情况</h5>
                                            <p class="text-muted small mb-0">按成本中心划分的预算使用详情</p>
                                        </div>
                                        <div class="table-tools">
                                            <div class="input-group input-group-sm">
                                                <input type="text" class="form-control form-control-sm" placeholder="搜索成本中心...">
                                                <button class="btn btn-sm btn-outline-secondary" type="button"><i class="bi bi-search"></i></button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="table-responsive">
                                        <table class="table table-sm table-hover budget-table">
                                            <thead>
                                                <tr>
                                                    <th class="ps-3">成本中心<i class="bi bi-arrow-down-short text-muted ms-1"></i></th>
                                                    <th>预算总额</th>
                                                    <th>已使用</th>
                                                    <th>剩余</th>
                                                    <th>使用率</th>
                                                    <th class="text-end pe-3">状态</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td class="ps-3"><span class="dept-name">业务一部</span></td>
                                                    <td>¥320万</td>
                                                    <td>¥245万</td>
                                                    <td>¥75万</td>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="progress flex-grow-1 me-2" style="height: 6px;">
                                                                <div class="progress-bar bg-warning" role="progressbar" style="width: 76%"></div>
                                                            </div>
                                                            <span class="small">76%</span>
                                                        </div>
                                                    </td>
                                                    <td class="text-end pe-3"><span class="status-badge warning">需关注</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="ps-3"><span class="dept-name">业务二部</span></td>
                                                    <td>¥480万</td>
                                                    <td>¥285万</td>
                                                    <td>¥195万</td>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="progress flex-grow-1 me-2" style="height: 6px;">
                                                                <div class="progress-bar bg-success" role="progressbar" style="width: 59%"></div>
                                                            </div>
                                                            <span class="small">59%</span>
                                                        </div>
                                                    </td>
                                                    <td class="text-end pe-3"><span class="status-badge success">正常</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="ps-3"><span class="dept-name">业务三部</span></td>
                                                    <td>¥250万</td>
                                                    <td>¥198万</td>
                                                    <td>¥52万</td>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="progress flex-grow-1 me-2" style="height: 6px;">
                                                                <div class="progress-bar bg-danger" role="progressbar" style="width: 79%"></div>
                                                            </div>
                                                            <span class="small">79%</span>
                                                        </div>
                                                    </td>
                                                    <td class="text-end pe-3"><span class="status-badge danger">超支风险</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="ps-3"><span class="dept-name">运营部门</span></td>
                                                    <td>¥150万</td>
                                                    <td>¥85万</td>
                                                    <td>¥65万</td>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="progress flex-grow-1 me-2" style="height: 6px;">
                                                                <div class="progress-bar bg-success" role="progressbar" style="width: 57%"></div>
                                                            </div>
                                                            <span class="small">57%</span>
                                                        </div>
                                                    </td>
                                                    <td class="text-end pe-3"><span class="status-badge success">正常</span></td>
                                                </tr>
                                                <tr>
                                                    <td class="ps-3"><span class="dept-name">车险业务部</span></td>
                                                    <td>¥220万</td>
                                                    <td>¥112万</td>
                                                    <td>¥108万</td>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="progress flex-grow-1 me-2" style="height: 6px;">
                                                                <div class="progress-bar bg-success" role="progressbar" style="width: 51%"></div>
                                                            </div>
                                                            <span class="small">51%</span>
                                                        </div>
                                                    </td>
                                                    <td class="text-end pe-3"><span class="status-badge success">正常</span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 调整margin-top值，使板块向上移动50px -->
    <div class="row" style="margin-top: -50px">
        <div class="col-12">
            <div class="insight-card">
                <h3>出险频率与保费规模相关性分析</h3>
                <p>通过散点图分析客户保费规模与出险频率的关联，为产品定价与风险管控提供数据支持</p>
                <div class="chart-controls mb-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="filter-options">
                            <div class="btn-group btn-group-sm">
                                <button class="btn btn-sm btn-outline-secondary active" data-period="all">全部客户</button>
                                <button class="btn btn-sm btn-outline-secondary" data-period="personal">个人客户</button>
                                <button class="btn btn-sm btn-outline-secondary" data-period="corporate">企业客户</button>
                            </div>
                        </div>
                        <div class="chart-info">
                            <span class="badge bg-light text-dark">
                                <i class="bi bi-info-circle me-1"></i>气泡大小表示单均赔付金额
                            </span>
                        </div>
                    </div>
                </div>
                <div class="canvas-container" style="height: 400px;">
                    <canvas id="insuranceScatterChart"></canvas>
                </div>
                <div class="scatter-legend d-flex justify-content-center mt-3">
                    <div class="d-flex align-items-center me-4 risk-filter active" data-risk="0">
                        <span class="legend-dot" style="background-color:rgba(52, 152, 219, 0.7)"></span>
                        <span class="small">低风险客户</span>
                    </div>
                    <div class="d-flex align-items-center me-4 risk-filter active" data-risk="1">
                        <span class="legend-dot" style="background-color:rgba(241, 196, 15, 0.7)"></span>
                        <span class="small">中风险客户</span>
                    </div>
                    <div class="d-flex align-items-center me-4 risk-filter active" data-risk="2">
                        <span class="legend-dot" style="background-color:rgba(231, 76, 60, 0.7)"></span>
                        <span class="small">高风险客户</span>
                    </div>
                    <div class="d-flex align-items-center risk-filter active" data-risk="3">
                        <span class="legend-dot" style="background-color:rgba(26, 188, 156, 0.7)"></span>
                        <span class="small">优质客户</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 联系方式部分 -->
    <section id="contact" class="section-padding bg-light">
        <div class="container">
            <div class="section-title text-center mb-5">
                <h2>联系方式</h2>
                <div class="underline"></div>
            </div>
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="contact-card text-center p-4">
                        <div class="contact-info">
                            <h3 class="mb-4">联系信息</h3>
                            <p class="mb-4">如果您对我的专业背景和经验感兴趣，或者有任何问题，请随时通过以下方式联系我。</p>
                            
                            <div class="row justify-content-center mt-5">
                                <div class="col-md-4 mb-4 mb-md-0">
                                    <div class="contact-item">
                                        <div class="contact-icon-circle mx-auto mb-3">
                                            <a href="mailto:zollnor@126.com" style="color: inherit; text-decoration: none;">
                                                <i class="bi bi-envelope fs-3"></i>
                                            </a>
                                        </div>
                                        <p class="mb-0">zollnor@126.com</p>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-4 mb-md-0">
                                    <div class="contact-item">
                                        <div class="contact-icon-circle mx-auto mb-3">
                                            <i class="bi bi-phone fs-3"></i>
                                        </div>
                                        <p class="mb-0">15813735320</p>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="contact-item">
                                        <div class="contact-icon-circle mx-auto mb-3 wechat-icon">
                                            <i class="bi bi-wechat fs-3"></i>
                                        </div>
                                        <p class="mb-0">微信</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-5 pt-3">
                                <h4 class="mb-4">地点</h4>
                                <div class="d-flex justify-content-center gap-4">
                                    <a href="#" class="social-link-circle d-inline-flex justify-content-center align-items-center">
                                        <i class="bi bi-geo-alt fs-3"></i>
                                    </a>
                                    <p class="ms-2 mt-3">深圳市</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 微信二维码模态窗口 -->
    <div class="modal fade" id="wechatModal" tabindex="-1" aria-labelledby="wechatModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title" id="wechatModalLabel">微信二维码</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="images/wechat-qr.jpg" alt="微信二维码" class="img-fluid" style="max-width: 300px;">
                </div>
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <p>&copy; 2025 杨云浩 - 专业财务业务合作伙伴</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="#home" class="back-to-top">返回顶部 <i class="bi bi-arrow-up"></i></a>
                </div>
            </div>
        </div>
    </footer>

    </main>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>

    <style>
    /* 全局背景美化 */
    body {
        background-color: #fafafa;
        position: relative;
    }
    
    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%232c3e50' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        z-index: -1;
    }

    /* 导航栏美化 */
    .navbar {
        background: linear-gradient(to right, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.98));
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
    }
    
    /* 首页部分背景 */
    .hero-section {
        position: relative;
        background: linear-gradient(135deg, #f5f7fa 0%, #e4efe9 100%);
        overflow: hidden;
    }
    
    .hero-section::before {
        content: '';
        position: absolute;
        top: -50px;
        right: -50px;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        background: radial-gradient(rgba(26, 188, 156, 0.1), rgba(26, 188, 156, 0.05));
        z-index: 0;
    }
    
    .hero-section::after {
        content: '';
        position: absolute;
        bottom: -100px;
        left: -100px;
        width: 400px;
        height: 400px;
        border-radius: 50%;
        background: radial-gradient(rgba(44, 62, 80, 0.1), rgba(44, 62, 80, 0.05));
        z-index: 0;
    }
    
    .hero-section .container {
        position: relative;
        z-index: 1;
    }

    /* 关于我部分背景 */
    #about {
        background-color: #ffffff;
        position: relative;
        overflow: hidden;
    }
    
    #about::before {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 100%;
        height: 100%;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%232c3e50' fill-opacity='0.03' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E");
        z-index: 0;
    }
    
    /* 专业经验部分背景 */
    #experience {
        background: linear-gradient(to bottom, #f8f9fa 0%, #e9ecef 100%);
        position: relative;
        overflow: hidden;
    }
    
    #experience::before {
        content: '';
        position: absolute;
        top: -150px;
        right: -150px;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        background: radial-gradient(rgba(26, 188, 156, 0.07), rgba(26, 188, 156, 0.03));
        z-index: 0;
    }
    
    /* 专业技能部分背景 */
    #skills {
        background-color: #ffffff;
        position: relative;
        overflow: hidden;
    }
    
    #skills::after {
        content: '';
        position: absolute;
        bottom: -150px;
        left: -150px;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        background: radial-gradient(rgba(44, 62, 80, 0.07), rgba(44, 62, 80, 0.03));
        z-index: 0;
    }
    
    /* 案例效果部分背景 */
    #projects {
        background: linear-gradient(to bottom, #e9ecef 0%, #f8f9fa 100%);
        position: relative;
    }
    
    /* 业务洞察部分背景 */
    .section-padding:not(#about):not(#skills):not(#experience):not(#projects):not(#contact) {
        background-color: #ffffff;
        position: relative;
        overflow: hidden;
    }
    
    /* 联系方式部分背景 */
    #contact {
        background: linear-gradient(135deg, #f8f9fa 0%, #e4efe9 100%);
        position: relative;
        overflow: hidden;
    }
    
    #contact::before {
        content: '';
        position: absolute;
        top: -100px;
        right: -100px;
        width: 200px;
        height: 200px;
        border-radius: 50%;
        background: radial-gradient(rgba(26, 188, 156, 0.1), rgba(26, 188, 156, 0.05));
        z-index: 0;
    }
    
    /* 卡片美化 */
    .finance-metrics-card, .skills-card, .project-card, .insight-card, .contact-card {
        backdrop-filter: blur(5px);
        background-color: rgba(255, 255, 255, 0.8);
        border: none;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .finance-metrics-card:hover, .skills-card:hover, .project-card:hover, .insight-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    
    /* 页脚美化 */
    .footer {
        background: linear-gradient(to right, #2c3e50 0%, #1a252f 100%);
        color: white;
        position: relative;
        overflow: hidden;
    }
    
    .footer::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 10px;
        background: linear-gradient(to right, #1abc9c, #2c3e50);
    }
    
    .footer a {
        color: #1abc9c;
    }
    
    .footer a:hover {
        color: #fff;
    }
    
    /* 联系信息图标美化 */
    .contact-icon-circle {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        background-color: var(--light-color);
        color: var(--secondary-color);
        border: 2px solid var(--secondary-color);
        display: flex;
        justify-content: center;
        align-items: center;
        transition: all 0.3s ease;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
    }

    .contact-item:hover .contact-icon-circle {
        transform: translateY(-5px) scale(1.05);
        background-color: var(--secondary-color);
        color: white;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .contact-item p {
        font-weight: 500;
        transition: all 0.3s ease;
    }

    .contact-item:hover p {
        color: var(--secondary-color);
    }

    .social-link-circle {
        width: 65px;
        height: 65px;
        border-radius: 50%;
        background-color: white;
        color: var(--primary-color);
        border: 2px solid var(--secondary-color);
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .social-link-circle:hover {
        background-color: var(--secondary-color);
        color: white;
        transform: translateY(-8px);
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
    }
    
    /* 波浪分隔符 */
    .wave-separator {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        overflow: hidden;
        line-height: 0;
    }
    
    .wave-separator svg {
        position: relative;
        display: block;
        width: calc(100% + 1.3px);
        height: 50px;
    }
    
    .wave-separator.top {
        top: 0;
        transform: rotate(180deg);
    }
    
    /* 侧边导航栏美化 */
    .sidebar-nav {
        position: fixed;
        left: 0;
        top: 0;
        height: 100vh;
        width: 210px; /* 从260px减少到210px */
        background: linear-gradient(135deg, #2c3e50, #1a252f);
        color: #fff;
        z-index: 1000;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
        transition: all 0.3s ease;
        padding-top: 20px;
        overflow-y: auto;
    }

    .sidebar-header {
        padding: 25px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .sidebar-brand {
        font-size: 1.5rem;
        font-weight: 600;
        color: #fff;
        text-decoration: none;
        display: flex;
        align-items: center;
    }

    .sidebar-brand::before {
        content: '';
        display: inline-block;
        width: 30px;
        height: 30px;
        margin-right: 10px;
        background: linear-gradient(135deg, #1abc9c, #16a085);
        border-radius: 8px;
    }

    .sidebar-toggler {
        background: transparent;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        font-size: 1.25rem;
    }

    /* 修改侧边导航栏内容的位置，向上移动100px */
    .sidebar-content {
        padding: 15px 0;
        margin-top: 400px; /* 从原来的500px减少到400px，实现向上移动100px */
    }

    .sidebar-nav-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .sidebar-nav-item {
        margin: 8px 0;
    }

    .sidebar-nav-link {
        display: flex;
        align-items: center;
        padding: 12px 20px;
        color: rgba(255, 255, 255, 0.7);
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s ease;
        border-left: 3px solid transparent;
        position: relative;
        overflow: hidden;
    }

    .sidebar-nav-link:hover, .sidebar-nav-link:focus {
        color: #fff;
        background: rgba(255, 255, 255, 0.08);
        border-left-color: #1abc9c;
        padding-left: 23px;
    }

    .sidebar-nav-link::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        transition: 0.5s;
    }

    .sidebar-nav-link:hover::before {
        left: 100%;
    }

    .sidebar-nav-link i {
        margin-right: 12px;
        font-size: 1.1rem;
        color: #1abc9c;
        transition: all 0.3s ease;
    }

    .sidebar-nav-link:hover i {
        transform: translateX(3px);
    }

    /* 激活状态 */
    .sidebar-nav-link.active {
        background: rgba(26, 188, 156, 0.15);
        color: #fff;
        border-left-color: #1abc9c;
        padding-left: 23px;
    }

    /* 主内容区域调整 */
    .main-content {
        margin-left: 210px; /* 从260px减少到210px */
        transition: all 0.3s ease;
    }

    /* 响应式设计 */
    @media (max-width: 991.98px) {
        .sidebar-nav {
            width: 210px; /* 从220px减少到210px，保持一致性 */
            transform: translateX(-100%);
        }
        
        .sidebar-nav.show {
            transform: translateX(0);
        }
        
        .main-content {
            margin-left: 0;
        }
        
        .has-sidebar .main-content {
            margin-left: 0;
        }
        
        .sidebar-toggler {
            display: block;
        }
    }
    
    /* 适配小屏幕时的侧边栏开关效果 */
    .sidebar-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 999;
    }
    
    /* 小屏幕时的移动导航 */
    @media (max-width: 767.98px) {
        .sidebar-nav {
            width: 260px;
        }
        
        .sidebar-nav.show {
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
        }
        
        .sidebar-overlay.show {
            display: block;
        }
    }

    /* 更新图表图例中的颜色点样式 */
    .legend-dot.primary {
        background-color: rgba(25, 135, 84, 0.85); /* 实际费用颜色 */
    }

    .legend-dot.secondary {
        background-color: rgba(13, 110, 253, 0.65); /* 预算费用颜色 */
    }

    /* 散点图相关样式 */
    .chart-controls {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 12px 15px;
    }

    .chart-info .badge {
        font-weight: normal;
        padding: 6px 10px;
        border: 1px solid #e0e0e0;
    }

    .scatter-legend {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 10px;
        margin-top: 15px;
    }

    /* 为按钮添加激活状态样式 */
    .filter-options .btn.active {
        background-color: var(--secondary-color);
        color: white;
        border-color: var(--secondary-color);
    }

    /* 风险类型筛选器样式 */
    .risk-filter {
        cursor: pointer;
        padding: 6px 12px;
        border-radius: 20px;
        transition: all 0.2s ease;
    }

    .risk-filter:hover {
        background-color: rgba(0, 0, 0, 0.05);
    }

    .risk-filter.active .legend-dot {
        opacity: 1;
    }

    .risk-filter:not(.active) {
        opacity: 0.5;
    }

    .risk-filter:not(.active) .legend-dot {
        opacity: 0.3;
    }
    </style>

    <script>
    // 业务洞察仪表板的图表初始化
    document.addEventListener('DOMContentLoaded', function() {
        // 准备不同财年的数据
        const dashboardData = {
            // 2023财年数据
            '2023': {
                // 季度视图数据
                '季度': {
                    kpi: {
                        totalBudget: '355万',
                        costControl: '-8.2%',
                        expenseTrend: '320万',
                        remainingBudget: '35万',
                        budgetUsage: 90
                    },
                    budgetComparison: {
                        labels: ['Q1', 'Q2', 'Q3', 'Q4'],
                        actual: [280, 320, 250, 0],
                        budget: [300, 300, 300, 350]
                    },
                    expenseDistribution: [42, 18, 15, 20, 5],
                    departments: [
                        {
                            name: '业务一部',
                            totalBudget: '320万',
                            used: '245万',
                            remaining: '75万',
                            usageRate: 76,
                            status: 'warning',
                            statusText: '需关注'
                        },
                        {
                            name: '业务二部',
                            totalBudget: '480万',
                            used: '285万',
                            remaining: '195万',
                            usageRate: 59,
                            status: 'success',
                            statusText: '正常'
                        },
                        {
                            name: '业务三部',
                            totalBudget: '250万',
                            used: '198万',
                            remaining: '52万',
                            usageRate: 79,
                            status: 'danger',
                            statusText: '超支风险'
                        },
                        {
                            name: '运营部门',
                            totalBudget: '150万',
                            used: '85万',
                            remaining: '65万',
                            usageRate: 57,
                            status: 'success',
                            statusText: '正常'
                        },
                        {
                            name: '车险业务部',
                            totalBudget: '220万',
                            used: '112万',
                            remaining: '108万',
                            usageRate: 51,
                            status: 'success',
                            statusText: '正常'
                        }
                    ]
                },
                // 年度视图数据
                '年度': {
                    kpi: {
                        totalBudget: '1,420万',
                        costControl: '-6.5%',
                        expenseTrend: '925万',
                        remainingBudget: '495万',
                        budgetUsage: 65
                    },
                    budgetComparison: {
                        labels: ['赔付成本', '运营成本', '营销费用', '人员成本', '其他费用', '总预算'],
                        actual: [357, 153, 127.5, 170, 117.5, 925],
                        budget: [500, 212.5, 187.5, 350, 170, 1420]
                    },
                    expenseDistribution: [38, 17, 14, 18, 13],
                    departments: [
                        {
                            name: '业务一部',
                            totalBudget: '320万',
                            used: '245万',
                            remaining: '75万',
                            usageRate: 76,
                            status: 'warning',
                            statusText: '需关注'
                        },
                        {
                            name: '业务二部',
                            totalBudget: '480万',
                            used: '285万',
                            remaining: '195万',
                            usageRate: 59,
                            status: 'success',
                            statusText: '正常'
                        },
                        {
                            name: '业务三部',
                            totalBudget: '250万',
                            used: '198万',
                            remaining: '52万',
                            usageRate: 79,
                            status: 'danger',
                            statusText: '超支风险'
                        },
                        {
                            name: '运营部门',
                            totalBudget: '150万',
                            used: '85万',
                            remaining: '65万',
                            usageRate: 57,
                            status: 'success',
                            statusText: '正常'
                        },
                        {
                            name: '车险业务部',
                            totalBudget: '220万',
                            used: '112万',
                            remaining: '108万',
                            usageRate: 51,
                            status: 'success',
                            statusText: '正常'
                        }
                    ]
                }
            },
            // 2022财年数据
            '2022': {
                // 季度视图数据
                '季度': {
                    kpi: {
                        totalBudget: '310万',
                        costControl: '-6.8%',
                        expenseTrend: '265万',
                        remainingBudget: '45万',
                        budgetUsage: 85.48
                    },
                    budgetComparison: {
                        labels: ['Q1', 'Q2', 'Q3', 'Q4'],
                        actual: [250, 270, 265, 275],
                        budget: [280, 280, 280, 280]
                    },
                    expenseDistribution: [38, 22, 17, 18, 5],
                    departments: [
                        {
                            name: '业务一部',
                            totalBudget: '290万',
                            used: '270万',
                            remaining: '20万',
                            usageRate: 93,
                            status: 'success',
                            statusText: '正常'
                        },
                        {
                            name: '业务二部',
                            totalBudget: '420万',
                            used: '392万',
                            remaining: '28万',
                            usageRate: 93,
                            status: 'success',
                            statusText: '正常'
                        },
                        {
                            name: '业务三部',
                            totalBudget: '230万',
                            used: '214万',
                            remaining: '16万',
                            usageRate: 93,
                            status: 'success',
                            statusText: '正常'
                        },
                        {
                            name: '运营部门',
                            totalBudget: '120万',
                            used: '112万',
                            remaining: '8万',
                            usageRate: 93,
                            status: 'success',
                            statusText: '正常'
                        },
                        {
                            name: '车险业务部',
                            totalBudget: '180万',
                            used: '168万',
                            remaining: '12万',
                            usageRate: 93,
                            status: 'success',
                            statusText: '正常'
                        }
                    ]
                },
                // 年度视图数据
                '年度': {
                    kpi: {
                        totalBudget: '1,240万',
                        costControl: '-6.8%',
                        expenseTrend: '1,156万',
                        remainingBudget: '84万',
                        budgetUsage: 93.3
                    },
                    budgetComparison: {
                        labels: ['赔付成本', '运营成本', '营销费用', '人员成本', '其他费用', '总预算'],
                        actual: [405.6, 226.4, 170.4, 191.6, 50, 1044],
                        budget: [471.2, 272.8, 210.8, 223.2, 62, 1240]
                    },
                    expenseDistribution: [38, 22, 17, 18, 5],
                    departments: [
                        {
                            name: '业务一部',
                            totalBudget: '290万',
                            used: '270万',
                            remaining: '20万',
                            usageRate: 93,
                            status: 'success',
                            statusText: '正常'
                        },
                        {
                            name: '业务二部',
                            totalBudget: '420万',
                            used: '392万',
                            remaining: '28万',
                            usageRate: 93,
                            status: 'success',
                            statusText: '正常'
                        },
                        {
                            name: '业务三部',
                            totalBudget: '230万',
                            used: '214万',
                            remaining: '16万',
                            usageRate: 93,
                            status: 'success',
                            statusText: '正常'
                        },
                        {
                            name: '运营部门',
                            totalBudget: '120万',
                            used: '112万',
                            remaining: '8万',
                            usageRate: 93,
                            status: 'success',
                            statusText: '正常'
                        },
                        {
                            name: '车险业务部',
                            totalBudget: '180万',
                            used: '168万',
                            remaining: '12万',
                            usageRate: 93,
                            status: 'success',
                            statusText: '正常'
                        }
                    ]
                }
            },
            // 2021财年数据
            '2021': {
                // 季度视图数据
                '季度': {
                    kpi: {
                        totalBudget: '275万',
                        costControl: '-4.8%',
                        expenseTrend: '250万',
                        remainingBudget: '25万',
                        budgetUsage: 90.9
                    },
                    budgetComparison: {
                        labels: ['Q1', 'Q2', 'Q3', 'Q4'],
                        actual: [235, 250, 240, 255],
                        budget: [245, 245, 245, 245]
                    },
                    expenseDistribution: [36, 24, 18, 17, 5],
                    departments: [
                        {
                            name: '业务一部',
                            totalBudget: '255万',
                            used: '255万',
                            remaining: '0万',
                            usageRate: 100,
                            status: 'success',
                            statusText: '已完成'
                        },
                        {
                            name: '业务二部',
                            totalBudget: '380万',
                            used: '380万',
                            remaining: '0万',
                            usageRate: 100,
                            status: 'success',
                            statusText: '已完成'
                        },
                        {
                            name: '业务三部',
                            totalBudget: '210万',
                            used: '210万',
                            remaining: '0万',
                            usageRate: 100,
                            status: 'success',
                            statusText: '已完成'
                        },
                        {
                            name: '运营部门',
                            totalBudget: '100万',
                            used: '100万',
                            remaining: '0万',
                            usageRate: 100,
                            status: 'success',
                            statusText: '已完成'
                        },
                        {
                            name: '车险业务部',
                            totalBudget: '150万',
                            used: '150万',
                            remaining: '0万',
                            usageRate: 100,
                            status: 'success',
                            statusText: '已完成'
                        }
                    ]
                },
                // 年度视图数据
                '年度': {
                    kpi: {
                        totalBudget: '1,095万',
                        costControl: '-2.9%',
                        expenseTrend: '1095万',
                        remainingBudget: '0万',
                        budgetUsage: 100
                    },
                    budgetComparison: {
                        labels: ['赔付成本', '运营成本', '营销费用', '人员成本', '其他费用', '总预算'],
                        actual: [352.8, 235.2, 176.4, 166.6, 49, 980],
                        budget: [394.2, 262.8, 197.1, 186.2, 54.7, 1095]
                    },
                    expenseDistribution: [36, 24, 18, 17, 5],
                    departments: [
                        {
                            name: '业务一部',
                            totalBudget: '255万',
                            used: '255万',
                            remaining: '0万',
                            usageRate: 100,
                            status: 'success',
                            statusText: '已完成'
                        },
                        {
                            name: '业务二部',
                            totalBudget: '380万',
                            used: '380万',
                            remaining: '0万',
                            usageRate: 100,
                            status: 'success',
                            statusText: '已完成'
                        },
                        {
                            name: '业务三部',
                            totalBudget: '210万',
                            used: '210万',
                            remaining: '0万',
                            usageRate: 100,
                            status: 'success',
                            statusText: '已完成'
                        },
                        {
                            name: '运营部门',
                            totalBudget: '100万',
                            used: '100万',
                            remaining: '0万',
                            usageRate: 100,
                            status: 'success',
                            statusText: '已完成'
                        },
                        {
                            name: '车险业务部',
                            totalBudget: '150万',
                            used: '150万',
                            remaining: '0万',
                            usageRate: 100,
                            status: 'success',
                            statusText: '已完成'
                        }
                    ]
                }
            }
        };
        
        // 预算比较图表
        const budgetComparisonCtx = document.getElementById('budgetComparisonChart').getContext('2d');
        let budgetComparisonChart = new Chart(budgetComparisonCtx, {
            type: 'bar',
            data: {
                labels: dashboardData['2023']['季度'].budgetComparison.labels,
                datasets: [
                    {
                        label: '实际费用',
                        data: dashboardData['2023']['季度'].budgetComparison.actual,
                        backgroundColor: 'rgba(25, 135, 84, 0.85)', // 更鲜明的绿色
                        borderColor: 'rgba(25, 135, 84, 1)',
                        borderWidth: 1,
                        borderRadius: 6,
                        maxBarThickness: 35
                    },
                    {
                        label: '预算费用',
                        data: dashboardData['2023']['季度'].budgetComparison.budget,
                        backgroundColor: 'rgba(13, 110, 253, 0.65)', // 更鲜明的蓝色
                        borderColor: 'rgba(13, 110, 253, 0.9)',
                        borderWidth: 1,
                        borderRadius: 6,
                        maxBarThickness: 35
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'x',
                layout: {
                    padding: {
                        top: 10,
                        right: 10,
                        bottom: 10,
                        left: 10
                    }
                },
                scales: {
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: '#666',
                            font: {
                                size: 11
                            },
                            padding: 5
                        }
                    },
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return '¥' + value + '万';
                            },
                            color: '#666',
                            font: {
                                size: 11
                            },
                            padding: 8
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)',
                            borderDash: [3, 3]
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        enabled: true,
                        backgroundColor: 'rgba(255, 255, 255, 0.95)',
                        titleColor: '#333',
                        bodyColor: '#333',
                        titleFont: {
                            weight: 'bold',
                            size: 13
                        },
                        bodyFont: {
                            size: 12
                        },
                        padding: 12,
                        cornerRadius: 8,
                        boxPadding: 6,
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += '¥' + context.raw + '万';
                                return label;
                            }
                        }
                    }
                },
                animation: {
                    duration: 1500,
                    easing: 'easeOutQuart'
                },
                barPercentage: 0.8,
                categoryPercentage: 0.7
            }
        });
        
        // 费用分布饼图
        const expenseDistributionCtx = document.getElementById('expenseDistributionChart').getContext('2d');
        let expenseDistributionChart = new Chart(expenseDistributionCtx, {
            type: 'doughnut',
            data: {
                labels: ['赔付成本', '运营成本', '营销支出', '人员成本', '其他费用'],
                datasets: [{
                    data: dashboardData['2023']['季度'].expenseDistribution,
                    backgroundColor: [
                        'rgba(26, 188, 156, 0.8)',
                        'rgba(52, 152, 219, 0.8)',
                        'rgba(231, 76, 60, 0.8)',
                        'rgba(241, 196, 15, 0.8)',
                        'rgba(149, 165, 166, 0.8)'
                    ],
                    borderColor: [
                        'rgba(26, 188, 156, 1)',
                        'rgba(52, 152, 219, 1)',
                        'rgba(231, 76, 60, 1)',
                        'rgba(241, 196, 15, 1)',
                        'rgba(149, 165, 166, 1)'
                    ],
                    borderWidth: 1,
                    cutout: '65%'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12,
                            padding: 15,
                            font: {
                                size: 11
                            },
                            color: '#555',
                            // 添加百分比显示在图例中
                            generateLabels: function(chart) {
                                const data = chart.data;
                                if (data.labels.length && data.datasets.length) {
                                    return data.labels.map(function(label, i) {
                                        const meta = chart.getDatasetMeta(0);
                                        const style = meta.controller.getStyle(i);
                                        const value = chart.data.datasets[0].data[i];
                                        
                                        return {
                                            text: `${label} (${value}%)`,
                                            fillStyle: style.backgroundColor,
                                            strokeStyle: style.borderColor,
                                            lineWidth: style.borderWidth,
                                            hidden: isNaN(data.datasets[0].data[i]) || meta.data[i].hidden,
                                            index: i
                                        };
                                    });
                                }
                                return [];
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(255, 255, 255, 0.95)',
                        titleColor: '#333',
                        bodyColor: '#333',
                        titleFont: {
                            weight: 'bold',
                            size: 13
                        },
                        bodyFont: {
                            size: 12
                        },
                        padding: 12,
                        cornerRadius: 8,
                        boxPadding: 6,
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.raw + '%';
                            }
                        }
                    },
                    // 在饼图上直接显示数据标签
                    datalabels: {
                        color: '#fff',
                        font: {
                            weight: 'bold',
                            size: 12
                        },
                        formatter: (value) => {
                            return value + '%';
                        },
                        display: function(context) {
                            return context.dataset.data[context.dataIndex] > 8; // 只显示大于8%的标签
                        }
                    }
                },
                animation: {
                    animateRotate: true,
                    animateScale: true,
                    duration: 1500
                }
            }
        });
        
        // 当前显示的数据状态
        let currentYear = '2023';
        let currentView = '季度';
        
        // 更新仪表板数据的函数
        function updateDashboardData(year, view) {
            // 更新KPI数据
            const kpiData = dashboardData[year][view].kpi;
            
            // 获取KPI卡片元素
            const kpiCards = document.querySelectorAll('.kpi-card');
            
            // 更新第一个KPI卡片（总预算）
            kpiCards[0].querySelector('h3').textContent = '¥ ' + kpiData.totalBudget;
            kpiCards[0].querySelector('.progress-bar').style.width = kpiData.budgetUsage + '%';
            kpiCards[0].querySelector('.text-primary').textContent = kpiData.budgetUsage + '%';
            
            // 更新第二个KPI卡片（成本控制）
            kpiCards[1].querySelector('h3').textContent = kpiData.costControl;
            
            // 更新第三个KPI卡片（费用趋势）
            kpiCards[2].querySelector('h3').textContent = '¥ ' + kpiData.expenseTrend;
            
            // 更新第四个KPI卡片（预测剩余预算）
            kpiCards[3].querySelector('h3').textContent = '¥ ' + kpiData.remainingBudget;
            
            // 更新图表数据
            updateBudgetComparisonChart(year, view);
            updateExpenseDistributionChart(year, view);
            updateDepartmentTable(year, view);
            
            // 更新图表标题
            if (view === '季度') {
                document.querySelector('.chart-title').textContent = '季度费用趋势与预算对比';
            } else {
                document.querySelector('.chart-title').textContent = '年度费用与预算对比';
            }
            
            // 更新当前状态
            currentYear = year;
            currentView = view;
            
            console.log('Dashboard updated to:', year, view);
        }
        
        // 更新预算比较图表
        function updateBudgetComparisonChart(year, view) {
            const chartData = dashboardData[year][view].budgetComparison;
            
            // 更新图表数据
            budgetComparisonChart.data.labels = chartData.labels;
            budgetComparisonChart.data.datasets[0].data = chartData.actual;
            budgetComparisonChart.data.datasets[1].data = chartData.budget;
            
            // 如果是切换到年度视图，更改图表类型
            if (view === '年度') {
                // 设置为横向条形图
                budgetComparisonChart.config.type = 'bar';
                budgetComparisonChart.options.indexAxis = 'y';
                
                // 显示图例
                budgetComparisonChart.options.plugins.legend = {
                    display: true,
                    position: 'top',
                    align: 'end',
                    labels: {
                        boxWidth: 12,
                        usePointStyle: true,
                        pointStyle: 'circle',
                        padding: 15,
                        color: '#555',
                        font: {
                            size: 11
                        }
                    }
                };
                
                // 配置水平刻度
                budgetComparisonChart.options.scales.x = {
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(0, 0, 0, 0.05)',
                        borderDash: [3, 3]
                    },
                    title: {
                        display: true,
                        text: '金额 (万元)',
                        font: {
                            size: 12,
                            weight: 'bold'
                        }
                    },
                    ticks: {
                        callback: function(value) {
                            return '¥' + value + '万';
                        },
                        color: '#666',
                        font: {
                            size: 11
                        }
                    }
                };
                
                // 优化垂直轴
                budgetComparisonChart.options.scales.y = {
                    grid: {
                        display: false
                    },
                    ticks: {
                        color: '#444',
                        font: {
                            weight: 'bold'
                        }
                    }
                };
                
                // 调整条形图宽度和间距
                budgetComparisonChart.options.barPercentage = 0.6;
                budgetComparisonChart.options.categoryPercentage = 0.7;
            } else {
                // 恢复为垂直条形图
                budgetComparisonChart.config.type = 'bar';
                budgetComparisonChart.options.indexAxis = 'x';
                
                // 隐藏图例
                budgetComparisonChart.options.plugins.legend = {
                    display: false
                };
                
                // 恢复原始刻度配置
                budgetComparisonChart.options.scales.x = {
                    grid: {
                        display: false
                    },
                    ticks: {
                        color: '#666',
                        font: {
                            size: 11
                        },
                        padding: 5
                    }
                };
                
                budgetComparisonChart.options.scales.y = {
                    beginAtZero: true,
                    ticks: {
                        callback: function(value) {
                            return '¥' + value + '万';
                        },
                        color: '#666',
                        font: {
                            size: 11
                        },
                        padding: 8
                    },
                    grid: {
                        color: 'rgba(0, 0, 0, 0.05)',
                        borderDash: [3, 3]
                    }
                };
                
                // 恢复原始条形图宽度和间距
                budgetComparisonChart.options.barPercentage = 0.8;
                budgetComparisonChart.options.categoryPercentage = 0.7;
            }
            
            // 应用更新
            budgetComparisonChart.update();
        }
        
        // 更新费用分布图表
        function updateExpenseDistributionChart(year, view) {
            const chartData = dashboardData[year][view].expenseDistribution;
            
            // 更新图表数据
            expenseDistributionChart.data.datasets[0].data = chartData;
            
            // 应用更新
            expenseDistributionChart.update();
        }
        
        // 更新部门表格数据
        function updateDepartmentTable(year, view) {
            const tableData = dashboardData[year][view].departments;
            const tableBody = document.querySelector('.budget-table tbody');
            
            // 清空表格内容
            tableBody.innerHTML = '';
            
            // 添加新的表格行
            tableData.forEach(dept => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td class="ps-3"><span class="dept-name">${dept.name}</span></td>
                    <td>¥${dept.totalBudget}</td>
                    <td>¥${dept.used}</td>
                    <td>¥${dept.remaining}</td>
                    <td>
                        <div class="d-flex align-items-center">
                            <div class="progress flex-grow-1 me-2" style="height: 6px;">
                                <div class="progress-bar bg-${dept.status}" role="progressbar" style="width: ${dept.usageRate}%"></div>
                            </div>
                            <span class="small">${dept.usageRate}%</span>
                        </div>
                    </td>
                    <td class="text-end pe-3"><span class="status-badge ${dept.status}">${dept.statusText}</span></td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // 重新添加表格行的交互效果
            const tableRows = document.querySelectorAll('.budget-table tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('mouseover', function() {
                    this.style.backgroundColor = 'rgba(240, 240, 240, 0.4)';
                });
                row.addEventListener('mouseout', function() {
                    this.style.backgroundColor = '';
                });
            });
        }
        
        // 年份选择切换事件
        const yearSelector = document.querySelector('.year-filter .form-select');
        yearSelector.addEventListener('change', function() {
            const selectedYear = this.value.split(' ')[0]; // 获取年份数字部分
            updateDashboardData(selectedYear, currentView);
        });
        
        // 视图切换事件 (季度/年度/自定义)
        const viewButtons = document.querySelectorAll('.time-filter .btn');
        viewButtons.forEach(button => {
            button.addEventListener('click', function() {
                viewButtons.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                const selectedView = this.textContent.trim();
                updateDashboardData(currentYear, selectedView);
            });
        });
        
        // 图表类型切换按钮事件
        const chartTypeButtons = document.querySelectorAll('.chart-tools .btn');
        chartTypeButtons.forEach(button => {
            button.addEventListener('click', function() {
                chartTypeButtons.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // 获取选中的图表类型
                const chartType = this.textContent.trim();
                
                // 根据选中的图表类型更新图表
                if (chartType === '条形图') {
                    budgetComparisonChart.config.type = 'bar';
                } else if (chartType === '线形图') {
                    budgetComparisonChart.config.type = 'line';
                    // 线图的附加配置
                    budgetComparisonChart.data.datasets.forEach(dataset => {
                        dataset.tension = 0.3; // 添加曲线效果
                        dataset.fill = false;
                        dataset.pointRadius = 5;
                        dataset.pointHoverRadius = 7;
                    });
                }
                
                // 应用更新
                budgetComparisonChart.update();
            });
        });
        
        // 初始化表格交互效果
        const tableRows = document.querySelectorAll('.budget-table tbody tr');
        tableRows.forEach(row => {
            row.addEventListener('mouseover', function() {
                this.style.backgroundColor = 'rgba(240, 240, 240, 0.4)';
            });
            row.addEventListener('mouseout', function() {
                this.style.backgroundColor = '';
            });
        });
    });
    
    // 添加导航链接激活状态处理
    document.addEventListener('DOMContentLoaded', function() {
        // 获取所有导航链接
        const navLinks = document.querySelectorAll('.sidebar-nav-link');
        
        // 滚动监听函数
        function onScroll() {
            const scrollPosition = window.scrollY;
            
            // 检查每个部分的位置
            document.querySelectorAll('section').forEach(section => {
                const sectionTop = section.offsetTop - 100;
                const sectionHeight = section.offsetHeight;
                const sectionId = section.getAttribute('id');
                
                if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                    // 移除所有激活状态
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                    });
                    
                    // 给当前部分的链接添加激活状态
                    const activeLink = document.querySelector(`.sidebar-nav-link[href="#${sectionId}"]`);
                    if (activeLink) {
                        activeLink.classList.add('active');
                    }
                }
            });
        }
        
        // 监听滚动事件
        window.addEventListener('scroll', onScroll);
        
        // 初始调用
        onScroll();
        
        // 移动端侧边栏切换
        const sidebarToggler = document.querySelector('.sidebar-toggler');
        const sidebar = document.querySelector('.sidebar-nav');
        const mainContent = document.querySelector('.main-content');
        
        // 创建遮罩层
        const overlay = document.createElement('div');
        overlay.className = 'sidebar-overlay';
        document.body.appendChild(overlay);
        
        function toggleSidebar() {
            sidebar.classList.toggle('show');
            overlay.classList.toggle('show');
            document.body.classList.toggle('sidebar-open');
        }
        
        if (sidebarToggler) {
            sidebarToggler.addEventListener('click', toggleSidebar);
        }
        
        // 点击遮罩层关闭侧边栏
        overlay.addEventListener('click', toggleSidebar);
        
        // 点击导航链接后如果是移动端则自动关闭侧边栏
        navLinks.forEach(link => {
            link.addEventListener('click', function() {
                if (window.innerWidth < 992) {
                    toggleSidebar();
                }
            });
        });
    });

    // 清理之前的相关代码，重新整合散点图的初始化和筛选功能
    document.addEventListener('DOMContentLoaded', function() {
        // 初始化保险出险图表相关功能
        initInsuranceScatterChart();
    });

    function initInsuranceScatterChart() {
        const scatterCtx = document.getElementById('insuranceScatterChart');
        if (!scatterCtx) return; // 如果找不到元素，就退出函数
        
        // 获取客户类型筛选按钮
        const clientTypeButtons = document.querySelectorAll('.filter-options .btn');
        // 获取风险类型筛选项
        const riskFilters = document.querySelectorAll('.risk-filter');
        // 默认显示所有风险类型
        let activeRiskTypes = [0, 1, 2, 3];
        
        // 修复散点图数据缺失问题
        const scatterData = {
            'all': [
                // 低风险客户 - 绿色
                [5.2, 0.8, 0.3, 0],
                [8.7, 1.2, 0.5, 0],
                [12.5, 1.1, 0.6, 0],
                [15.3, 1.5, 0.7, 0],
                [18.9, 1.3, 0.8, 0],
                [22.4, 1.6, 0.9, 0],
                [7.3, 0.7, 0.4, 0],
                [10.6, 1.0, 0.6, 0],
                // 中风险客户 - 蓝色
                [6.5, 2.1, 1.2, 1],
                [11.2, 2.5, 1.5, 1],
                [14.8, 2.8, 1.8, 1],
                [19.3, 2.7, 1.9, 1],
                [23.6, 3.0, 2.0, 1],
                [9.4, 2.2, 1.3, 1],
                [16.7, 2.6, 1.7, 1],
                [25.8, 3.1, 2.2, 1],
                // 高风险客户 - 红色
                [8.3, 4.5, 2.8, 2],
                [13.9, 5.2, 3.1, 2],
                [17.6, 4.8, 3.3, 2],
                [21.2, 5.5, 3.6, 2],
                [10.5, 4.3, 2.5, 2],
                [15.8, 5.0, 3.0, 2],
                [24.1, 5.8, 3.9, 2],
                [27.9, 6.2, 4.2, 2],
                // 优质客户 - 黄色
                [30.5, 1.8, 1.0, 3],
                [35.2, 2.2, 1.5, 3],
                [42.7, 2.5, 1.8, 3],
                [50.3, 2.8, 2.0, 3],
                [38.6, 2.0, 1.2, 3],
                [45.1, 2.3, 1.6, 3],
                [52.9, 2.6, 1.9, 3],
                [60.4, 3.0, 2.2, 3]
            ],
            'personal': [
                // 低风险个人客户
                [3.2, 0.6, 0.2, 0],
                [5.7, 0.9, 0.4, 0],
                [8.5, 1.0, 0.5, 0],
                [10.3, 1.2, 0.6, 0],
                [4.9, 0.8, 0.3, 0],
                // 中风险个人客户
                [4.5, 1.8, 1.0, 1],
                [7.2, 2.2, 1.3, 1],
                [9.8, 2.5, 1.5, 1],
                [12.3, 2.4, 1.6, 1],
                [6.4, 2.0, 1.2, 1],
                // 高风险个人客户
                [5.3, 3.8, 2.3, 2],
                [8.9, 4.5, 2.8, 2],
                [11.6, 4.2, 2.6, 2],
                [14.2, 4.8, 3.0, 2],
                [7.5, 4.0, 2.5, 2],
                // 优质客户个人客户
                [18.5, 1.5, 0.8, 3],
                [22.2, 1.8, 1.2, 3],
                [25.7, 2.0, 1.5, 3],
                [20.6, 1.7, 1.0, 3],
                [23.1, 1.9, 1.4, 3]
            ],
            'corporate': [
                // 低风险企业客户
                [15.2, 1.3, 0.7, 0],
                [18.7, 1.5, 0.8, 0],
                [22.5, 1.4, 0.9, 0],
                [17.9, 1.6, 0.8, 0],
                // 中风险企业客户
                [16.5, 2.8, 1.8, 1],
                [21.2, 3.2, 2.0, 1],
                [24.8, 3.5, 2.3, 1],
                [29.3, 3.6, 2.4, 1],
                [19.7, 3.0, 1.9, 1],
                // 高风险企业客户
                [18.3, 5.2, 3.2, 2],
                [23.9, 5.8, 3.5, 2],
                [27.6, 5.5, 3.7, 2],
                [31.2, 6.0, 4.0, 2],
                [20.5, 5.0, 3.0, 2],
                // 优质客户企业客户
                [40.5, 2.5, 1.8, 3],
                [45.2, 2.8, 2.0, 3],
                [52.7, 3.0, 2.3, 3],
                [60.3, 3.3, 2.5, 3],
                [48.6, 2.7, 2.0, 3]
            ]
        };
        
        // 修改颜色配置，调整各类客户的颜色
        const riskColors = [
            'rgba(52, 152, 219, 0.7)',  // 低风险 - 蓝色（原绿色）
            'rgba(241, 196, 15, 0.7)',  // 中风险 - 黄色（原蓝色）
            'rgba(231, 76, 60, 0.7)',   // 高风险 - 红色（保持不变）
            'rgba(26, 188, 156, 0.7)'   // 优质客户 - 绿色（原黄色）
        ];
        
        // 修改边框颜色配置
        const riskBorderColors = [
            'rgba(52, 152, 219, 1)',    // 低风险 - 蓝色
            'rgba(241, 196, 15, 1)',    // 中风险 - 黄色
            'rgba(231, 76, 60, 1)',     // 高风险 - 红色
            'rgba(26, 188, 156, 1)'     // 优质客户 - 绿色
        ];
        
        // 准备散点图数据函数
        function prepareScatterData(dataType) {
            const datasets = [];
            
            for (let riskLevel = 0; riskLevel < 4; riskLevel++) {
                const points = scatterData[dataType].filter(point => point[3] === riskLevel);
                
                const dataset = {
                    data: points.map(point => ({
                        x: point[0],  // 保费规模
                        y: point[1],  // 出险频率
                        r: point[2] * 8  // 气泡大小基于单均赔付
                    })),
                    backgroundColor: riskColors[riskLevel],
                    borderColor: riskBorderColors[riskLevel],
                    borderWidth: 1,
                    pointStyle: 'circle',
                    pointRadius: 0,
                    pointHoverRadius: 0,
                    hidden: !activeRiskTypes.includes(riskLevel)
                };
                
                datasets.push(dataset);
            }
            
            return datasets;
        }
        
        // 初始化图表
        const insuranceScatterChart = new Chart(scatterCtx.getContext('2d'), {
            type: 'bubble',
            data: {
                datasets: prepareScatterData('all')
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: '保费规模 (万元/年)',
                            font: {
                                size: 12,
                                weight: 'bold'
                            }
                        },
                        min: 0,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)',
                            borderDash: [3, 3]
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: '出险频率 (次/年)',
                            font: {
                                size: 12,
                                weight: 'bold'
                            }
                        },
                        min: 0,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)',
                            borderDash: [3, 3]
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        enabled: true,
                        backgroundColor: 'rgba(255, 255, 255, 0.95)',
                        titleColor: '#333',
                        bodyColor: '#333',
                        titleFont: {
                            weight: 'bold',
                            size: 13
                        },
                        bodyFont: {
                            size: 12
                        },
                        padding: 12,
                        cornerRadius: 8,
                        callbacks: {
                            title: function(tooltipItems) {
                                return '客户分析';
                            },
                            label: function(context) {
                                let riskTypes = ['低风险', '中风险', '高风险', '优质客户'];
                                let riskIndex = context.datasetIndex;
                                return [
                                    '风险类型: ' + riskTypes[riskIndex],
                                    '保费规模: ¥' + context.raw.x.toFixed(1) + '万/年',
                                    '出险频率: ' + context.raw.y.toFixed(1) + '次/年',
                                    '单均赔付: ¥' + (context.raw.r / 8).toFixed(1) + '万'
                                ];
                            }
                        }
                    }
                },
                animation: {
                    duration: 1500,
                    easing: 'easeOutQuart'
                }
            }
        });
        
        // 更新图表函数
        function updateScatterChartVisibility(clientType) {
            insuranceScatterChart.data.datasets = prepareScatterData(clientType);
            
            // 设置适当的X轴范围
            if (clientType === 'personal') {
                insuranceScatterChart.options.scales.x.max = 30;
            } else if (clientType === 'corporate') {
                insuranceScatterChart.options.scales.x.min = 10;
                insuranceScatterChart.options.scales.x.max = 65;
            } else {
                insuranceScatterChart.options.scales.x.min = 0;
                insuranceScatterChart.options.scales.x.max = undefined;
            }
            
            insuranceScatterChart.update();
        }
        
        // 添加客户类型筛选功能
        if (clientTypeButtons) {
            clientTypeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    clientTypeButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    const clientType = this.dataset.period;
                    updateScatterChartVisibility(clientType);
                });
            });
        }
        
        // 添加风险类型筛选功能
        if (riskFilters) {
            riskFilters.forEach(filter => {
                filter.addEventListener('click', function() {
                    const riskType = parseInt(this.dataset.risk);
                    
                    // 切换活动状态
                    this.classList.toggle('active');
                    
                    if (this.classList.contains('active')) {
                        // 添加到活动类型列表
                        if (!activeRiskTypes.includes(riskType)) {
                            activeRiskTypes.push(riskType);
                        }
                    } else {
                        // 从活动类型列表中移除
                        activeRiskTypes = activeRiskTypes.filter(type => type !== riskType);
                    }
                    
                    // 更新当前客户类型的图表
                    const currentClientType = document.querySelector('.filter-options .btn.active');
                    if (currentClientType) {
                        updateScatterChartVisibility(currentClientType.dataset.period);
                    } else {
                        updateScatterChartVisibility('all');
                    }
                    
                    // 防止所有类型都被隐藏
                    if (activeRiskTypes.length === 0) {
                        this.classList.add('active');
                        activeRiskTypes.push(riskType);
                        updateScatterChartVisibility(document.querySelector('.filter-options .btn.active').dataset.period);
                    }
                });
            });
        }
    }

    // 确保DOM完全加载后再初始化图表
    document.addEventListener('DOMContentLoaded', function() {
        // 延迟一下初始化，确保Canvas元素已完全渲染
        setTimeout(function() {
            initInsuranceScatterChart();
        }, 100);
    });
    </script>
</body>
</html>
